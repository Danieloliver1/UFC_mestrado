COMO FAZER O DEPLOY


DATA: 28/07/2023

LINK:
https://login.microsoftonline.com/6d088690-3468-430c-b686-f94c4729ae4b/oauth2/authorize?client%5Fid=00000003%2D0000%2D0ff1%2Dce00%2D000000000000&response%5Fmode=form%5Fpost&response%5Ftype=code%20id%5Ftoken&resource=00000003%2D0000%2D0ff1%2Dce00%2D000000000000&scope=openid&nonce=CE1760DCC0939A11BF5DEB90FCE7D03732D2EC37EC9BA430%2D2A5AF090AEDC60316321DCB50BEED89B07553BF5429388FD8BE88B5E20905A01&redirect%5Furi=https%3A%2F%2Fdataprevrj%2Dmy%2Esharepoint%2Ecom%2F%5Fforms%2Fdefault%2Easpx&state=OD0w&claims=%7B%22id%5Ftoken%22%3A%7B%22xms%5Fcc%22%3A%7B%22values%22%3A%5B%22CP1%22%5D%7D%7D%7D&wsucxt=1&cobrandid=11bd8083%2D87e0%2D41b5%2Dbb78%2D0bc43c8a8e8a&client%2Drequest%2Did=cde7dda0%2D409c%2D4000%2D4516%2D75d8a314b67c

CASO TENHA DÚVIDAS SOBRE GIT/GITLAB, verifique o seguinte vídeo:
https://www.youtube.com/watch?v=vvn2ZKnT_e8


-------------------------------------------
PASSO A PASSO DEPLOY



	
	
[NO Windows Explorer] + [Usando GIT e GITLAB]
02. Extraia os arquivos da pasta .zip baixada.
	O próximo passo será colocar esses arquivos extraídos no GIT(pode usar o TORTOISEgit para lhe auxiliar, ao invés de fazer por linha código no GIT BASH), pois o URBANCODE atualiza a partir do GIT.
	
	- Entre na pasta do projeto (certamente você já conectou ela na sua máquina através do GIT CLONE)
	- Faça um GIT PULL dentro da pasta do projeto (Ex.: bg_bmob) para atualizar o repositório local.
	(Isso é feito para evitar os MERGES, pois alguém pode ter alterado algo antes de você, então fazemos o GIT PULL para trazer as últimas atualizações para seu repositório local)

	Em alguns projetos como o projeto bg_bmob, será necessário atualizar o arquivo .TXT da pasta do projeto onde você colou os arquivos .ZIP (no bmob, esse arquivo se chama: "Versões do Painel BMOB.txt")
	Nesse caso, abra o arquivo e copie um pedaço do código onde tem versão e cole logo acima, ATUALIZANDO o NÚMERO DA TAG e também o a DESCRIÇÃO DO QUE FOI FEITO.
	Ex.:
"
-------------- Versão 4.21.0 --------------------------------------------------
- Ajustes na cluster
-------------------------------------------------------------------------------
"
	
	- Após fazer o git pull, você deve COPIAR os arquivos extraídos do .zip que você baixou e COLAR na pasta do projeto onde você fez o git pull
	(Ex.: "C:\Users\joao.mourabrito\Documents\ProjetosRepositorios\PainelBgBmob\painel-bmob\bg_bmob")
	(Windows perguntará se vc quer substituir os antigos arquivos pelos arquivos do repositório atual. PODE SUBSTITUIR!)

	- Próximo passo é subir esses arquivos para a parte central (GIT COMMIT)
	(Mas para isso você precisará de uma TASK(Número de tarefa da determinada sprint) que seja válida no ALM)
	
	- FAÇA um COMMIT (Clique com o botão direito na pasta do repositório do projeto e vá em "Git Commit" - o símbolo é uma seta verde)
	(e faça GIT ADD, caso esteja usando o gitbash... Mas no tortoiseGIT já faz o add na hora do push.)

	- Na mensagem digite "Task 000000 - DigiteAquiOqueVoceAtualizouNosRelatoriosOuMasters" (Ex.: Task 123456 - Acréscimo de filtro, cabeçalho e rodapé)
	- No tortoiseGIT mostra as .FEX que foram alteradas mas NÃO ESTÃO VERSIONADOS, LEMBRE-SE de marcá-las.
	
	- FAÇA um GIT PUSH
	PRONTO: Basta atualizar a página do gitlab e verá que seu commit foi inserido com sucesso!
	
	
[NO GitLab]
	AGORA É NECESSÁRIO UMA TAG (crie uma no gitlab)
	Para dizer que o UrbanCode vai pegar aquele conjunto de código. (A tag ela congela um conjunto de código 'naquele momento')
	VÁ no GITLAB e veja qual o padrão de TAG (Entre no projeto, vá em Repository -> Tags). Veja o exemplo de uma tag do painel-bmob -> "r_BG_BMOB_4_20_0"
	
	


[NO UrbanCode]
(Lembrando que estou usando o bmob como exemplo)

03. Em COMPONENTES procure por
	"PAINEL-BMOB-WF-APP", ao entrar no componente,
	vá em "Versões" e clique em "Importar novas versões",
	em "Versão/Tag Específica" digite o nome da tag (criada anteriormente no gitlab, ex.: "r_BG_BMOB_4_21_0"), e repita esse nome no campo "Nome com o qual criar a versão".

Em APLICATIVOS procure por
	"PAINEL-BMOB-WF-HS", ao entrar no aplicativo,
	vá em "Capturas Instantâneas" e clique em "Criar captura instantânea"
	em "Nome" digite o nome da captura (Siga o padrão utilizado: "snapshot_bmob_wf_20231025"), e repita esse nome no campo "Descrição".
	
	LEMBRE QUE:
	você está utilizando o PAINEL-BMOB-WF-APP (WebFOCUS)
		(e NÃO o PAINEL-BMOB-HS-APP - HyperStage!!!)

	Então inclua a captura no PAINEL-BMOB-WF-APP!


PRONTO
Após isso, é só informar ao responsável pelo "play" no ambiente de produção.
(o estágiário só chega até esse momento... por enquanto.)


-------------------------------------------
[Anotações para ajudar no DEPLOY]

Exemplo:
PROJETO BMOB

NOME DO PROJETO USADO COMO EXEMPLO: bgbmob

- REPOSITÓRIO GITLAB: https://www-scm.prevnet/inss/painel-bmob

- ARQUIVO DE CONTROLE MANUAL DE VERSÕES (do bmob)
	Versões do Painel BMOB.txt:

	-------------- Versão 4.21.0 --------------------------------------------------
	- Ajustes na cluster
	-------------------------------------------------------------------------------

- TASK:       Task 447215 - Ajustes na cluster

- TAG:        r_BG_BMOB_4_21_0

[UrbanCode]
- COMPONENTE: PAINEL-BMOB-WF-APP
- VERSÃO:     r_BG_BMOB_4_21_0

- APLICATIVO: PAINEL-BMOB-WF-APP
- SNAPSHOT:   snapshot_bmob_wf_20230728

	
	
	
	
	
	
	
	
	